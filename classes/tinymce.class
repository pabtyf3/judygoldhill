<?php

/**
 * @author pabtyf
 * @copyright 2012
 */

class tinymce{
    
    var $script="";
    
    function __construct($element="",$theme="advanced",$css="tinyInner.css"){

           $ret="<script type='text/javascript' src='/js/tiny/tiny_mce.js'></script>
        <script type='text/javascript' src='/js/imglib/css/imglib_tiny_manager.js'></script>";
        $ret.="<script type='text/javascript'>
        imgLibManager.init({url: '/js/imglib/index.html'})
 tinyMCE.init({
width:'500px',

";	

if($element==""){
$ret.=" mode : 'textareas',";
}else{
    $ret.="mode : 'exact',
    elements : '".$element."',";
}


if($theme=="advanced"){
    $ret.="theme : 'advanced',
     plugins : 'autolink,contextmenu,xhtmlxtras,table,paste,media,layer,advimage,lists,iespell,pagebreak', 
    theme_advanced_buttons1 : 'pagebreak,bold,italic,underline,strikethrough,styleselect,formatselect,|,tablecontrols,|',
 theme_advanced_buttons2 : 'undo,redo,|,cleanup,bullist,numlist,|,outdent,indent,link,unlink,anchor,|,image,media,|,iespell',
 theme_advanced_buttons3 : '',
 
 theme_advanced_toolbar_location : 'bottom',
 theme_advanced_toolbar_align : 'left',
 theme_advanced_statusbar_location : 'bottom',
 theme_advanced_resizing : true, ";
}elseif($theme=="simple"){
    $ret.="theme:'simple',";
}elseif($theme=="advanced-nav"){
      $ret.="theme : 'advanced',
     plugins : 'autolink,contextmenu,xhtmlxtras,table,paste,media,layer,advimage,lists,iespell,pagebreak', 
    theme_advanced_buttons1 : 'navdivider,bold,italic,underline,strikethrough,link,unlink,|,undo,redo',
 theme_advanced_buttons2 : '',
 theme_advanced_buttons3 : '',
 
 theme_advanced_toolbar_location : 'bottom',
 theme_advanced_toolbar_align : 'left',
 theme_advanced_statusbar_location : 'bottom',
 theme_advanced_resizing : true, ";
}elseif($theme=="mega_simple"){
    $ret.="theme : 'advanced',
     plugins : 'autolink,contextmenu,xhtmlxtras,table,paste,media,layer,advimage,lists,iespell,pagebreak', 
    theme_advanced_buttons1 : '',
 theme_advanced_buttons2 : '',
 theme_advanced_buttons3 : '',

 theme_advanced_toolbar_location : 'bottom',
 theme_advanced_toolbar_align : 'left',
 theme_advanced_statusbar_location : 'bottom',
 theme_advanced_resizing : true, ";
    }else{
      $ret.="theme : 'advanced',
     plugins : 'autolink,contextmenu,xhtmlxtras,table,paste,media,layer,advimage,lists,iespell,pagebreak', 
    theme_advanced_buttons1 : 'bold,italic,navdivider,link,unlink,|,undo,redo|,image,media',
 theme_advanced_buttons2 : '',
 theme_advanced_buttons3 : '',
 
 theme_advanced_toolbar_location : 'bottom',
 theme_advanced_toolbar_align : 'left',
 theme_advanced_statusbar_location : 'bottom',
 theme_advanced_resizing : true, ";
}

	$ret.="
    
 //Use line below to add custom classes to styles list
 //theme_advanced_styles : 'Header 1=header1;Header 2=header2;Header 3=header3;Table Row=tableRow1',

 
 relative_urls:false,
 content_css : '/css/".$css."?t=".time()."',
// forced_root_block : 'p',
forced_root_block: false,
force_br_newlines : true,
force_p_newlines : false,
 setup : function(ed) {
        // Add a custom button

        
                ed.addButton('navdivider', {
		title : 'Nav Divider',
		image : '/images/hr.gif',
		onclick : function() {
			// Add you own code to execute something on click
			ed.focus();
		  ed.selection.setContent('<div class=\'newsdivider2\'></div>');
         // ed.blur();
         //
	        }
        });
        
                        ed.addButton('mybutton3', {
		title : 'Insert Image With Caption - Left Aligned',
		image : '/images/icons/image-w-caption-L.png',
		onclick : function() {
			// Add you own code to execute something on click
			ed.focus();
		  ed.selection.setContent('<div class=\'imgcontl\'><img src=\'/images/placeholder.png\' alt=\'\' width=\'250\' height=\'176\' /><p class=\'imglbl\'>Caption Here</p></div>');
         // ed.blur();
         //
	        }
        });
        
    },
    

	//content_css : stylesheet,
		//external_image_list_url : cmsPath+'image_list.php',
        file_browser_callback:'imgLibManager.open',
        external_link_list_url : '/js/linklist.php'


});
</script>";
$this->script = $ret;
    }
    #image-w-caption.png
}

?>